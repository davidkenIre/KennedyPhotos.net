@model Blogs.Models.Blog
<div class="page-header">
    <h1>Edit Blog</h1>
</div>

<form class="form-horizontal" role="form" action="/blog/save" method="post">
    <div class="form-group">
        <label for="email">Title</label>
        <input type="text" class="form-control" id="title" name="title" value="@Model.Title">
        <input type="hidden" class="form-control" id="Id" name="Id" value="@ViewBag.Id">
    </div>

    <div class="form-group">
        <label for="email">Author</label>
        <input type="text" class="form-control" id="author" name="author" value="@Model.Author">
    </div>
    <div class="form-group">
        <label>Date Posted</label>
        <div class="form-group btn-toolbar" data-role="editor-toolbar" data-target="#editor">
            <div class="btn-group">
                <a class="btn btn-default" data-edit="bold" title="" data-original-title="Bold (Ctrl/Cmd+B)"><i class="glyphicon glyphicon-bold"></i></a>
                <a class="btn btn-default" data-edit="italic" title="" data-original-title="Italic (Ctrl/Cmd+I)"><i class="glyphicon glyphicon-italic"></i></a>
                <a class="btn btn-default" data-edit="underline" title="" data-original-title="Underline (Ctrl/Cmd+U)"><i class="glyphicon glyphicon-text-width"></i></a>
            </div>
            <div class="btn-group">
                <a class="btn btn-default" data-edit="insertunorderedlist" title="" data-original-title="Bullet list"><i class="glyphicon glyphicon-list"></i></a>
                <a class="btn btn-default" data-edit="insertorderedlist" title="" data-original-title="Number list"><i class="glyphicon glyphicon-list-alt"></i></a>
                <a class="btn btn-default" data-edit="outdent" title="" data-original-title="Reduce indent (Shift+Tab)"><i class="glyphicon glyphicon-indent-left"></i></a>
                <a class="btn btn-default" data-edit="indent" title="" data-original-title="Indent (Tab)"><i class="glyphicon glyphicon-indent-right"></i></a>
            </div>
            <div class="btn-group">
                <a class="btn btn-default" data-edit="justifyleft" title="" data-original-title="Align Left (Ctrl/Cmd+L)"><i class="glyphicon glyphicon-align-left"></i></a>
                <a class="btn btn-default" data-edit="justifycenter" title="" data-original-title="Center (Ctrl/Cmd+E)"><i class="glyphicon glyphicon-align-center"></i></a>
                <a class="btn btn-default" data-edit="justifyright" title="" data-original-title="Align Right (Ctrl/Cmd+R)"><i class="glyphicon glyphicon-align-right"></i></a>
                <a class="btn btn-default" data-edit="justifyfull" title="" data-original-title="Justify (Ctrl/Cmd+J)"><i class="glyphicon glyphicon-align-justify"></i></a>
            </div>
            <div class="btn-group">
                <a class="btn btn-default" title="" id="pictureBtn" data-original-title="Insert picture (or just drag &amp; drop)">
                    <i class="glyphicon glyphicon-picture"></i>
                    <input type="file" data-role="magic-overlay" data-target="#pictureBtn" data-edit="insertImage" style="opacity: 0; position: absolute; top: 0px; left: 0px; width: 37px; height: 30px;">
                </a>
            </div>
            <div class="btn-group">
                <a class="btn btn-default" data-edit="undo" title="" data-original-title="Undo (Ctrl/Cmd+Z)"><i class="glyphicon glyphicon-backward"></i></a>
                <a class="btn btn-default" data-edit="redo" title="" data-original-title="Redo (Ctrl/Cmd+Y)"><i class="glyphicon glyphicon-forward"></i></a>
            </div>
            <input type="text" data-edit="inserttext" id="voiceBtn" x-webkit-speech="" style="position: absolute; top: 280px; left: 1280px;">
        </div>

        <div id="blogtext" style="overflow:scroll; height:300px;" class="form-control" name="blogtext" data-target="blogtexthtml">
        </div>

        <textarea type="text" class="hidden" name="blogtexthtml" id="blogtexthtml"></textarea>

        <script>
                @if (Model.BlogText != null)
                {
                    @:$("#blogtext").html("@Html.Raw(Model.BlogText.Replace("\r\n", String.Empty).Replace("\"", "'"))")
                            }
        </script>

        <br />
        <div class="btn-group" role="group" aria-label="...">
            <input type="submit" class="btn btn-primary" value="Save" id="btnsubmit" name="btnsubmit" />
            <input type="submit" class="btn btn-default" value="Delete" id="btnsubmit" name="btnsubmit" />
            <a class="btn btn-default" href="/Blog/Index" role="button"> &laquo; Back to Blog</a>
        </div>


        <script>
            // Initialise the editor
            $('#blogtext').wysiwyg();

            // Submit button clicked - copy the content of the wysiwyg editor into a hidden field
            $('#btnsubmit').click(function () {
                $('#blogtexthtml').html(
                    $("#blogtext").html()
                );
            });
            $('#btnsubmitreturn').click(function () {
                $('#blogtexthtml').html(
                    $("#blogtext").html()
                );
            });
        </script>

    </div>
</form>
